from flask import Flask, request, jsonify
import json

app = Flask(__name__)

@app.route('/analyze-sql', methods=['POST'])
def analyze_sql():
    try:
        # Get posted JSON body
        data = request.get_json()

        # Optional: Log or validate 'sqldata' key (if needed)
        if 'sqldata' not in data:
            return jsonify({"error": "'sqldata' key not found in request"}), 400

        # Load JSON content from file
        with open("mock_sql_analysis.json", "r") as f:
            mock_data = json.load(f)

        # Return the entire JSON content as response
        return jsonify(mock_data)

    except FileNotFoundError:
        return jsonify({"error": "mock_sql_analysis.json file not found"}), 404
    except Exception as e:
        return jsonify({"error": str(e)}), 500

if __name__ == "__main__":
    app.run(debug=True)
